sequenceDiagram
    participant SI as SocketIsolate
    participant PI as ProcessingIsolate
    participant Buffer as CircularBuffer
    participant Data as DataProcessor
    participant Trigger as TriggerSystem
    participant Filter as FilterSystem
    participant Graph as GraphSystem
    participant UI as UserInterface

    SI->>Buffer: Raw data chunks (16-bit)
    Note over Buffer: samplesPerPacket size
    Buffer->>Data: Extract samples using masks
    Note over Data: Single bit operation<br>with precalc masks

    Data->>Data: Apply dividing factor
    Note over Data: Process samples where<br>index % factor == 0

    Data->>Data: Convert to physical coords
    Note over Data: Use maxBits/midBits<br>for voltage conversion

    Data->>Trigger: Send processed points
    
    alt Filter enabled for trigger
        Trigger->>Filter: Request trigger signal filtering
        Filter->>Filter: Apply Butterworth
        Note over Filter: fc=50kHz<br>Configurable order
        Filter->>Filter: Forward pass
        Filter->>Filter: Reflect signal
        Filter->>Filter: Backward pass
        Note over Filter: Zero-phase response
        Filter->>Trigger: Return filtered signal
    end

    Trigger->>Trigger: Get 5-point window
    Note over Trigger: Calculate trend with<br>least squares method
    
    Trigger->>Trigger: Check level & direction
    Note over Trigger: Compare with 25%<br>hysteresis band

    alt Valid Trigger Found
        Trigger->>Trigger: Check mode
        alt Single Shot Mode
            Trigger->>PI: Stop acquisition
            Trigger->>UI: Pause display
        else Normal Mode
            Trigger->>Trigger: Wait for band exit
            Note over Trigger: Reset after<br>clearing hysteresis
        end
    end

    Data->>Filter: Send data for visualization
    
    alt Filtering Enabled
        Note over Filter: Strategy Pattern<br>for filter selection
        
        alt Moving Average
            Filter->>Filter: Apply FIR filter
            Note over Filter: Uniform coefficients<br>Configurable window
        else Butterworth
            Filter->>Filter: Apply IIR filter
            Note over Filter: Configurable fc & order<br>Zero-phase optional
        end
    end

    Filter->>Graph: Send filtered data
    Graph->>Graph: Calculate metrics
    Note over Graph: Frequency from<br>trigger intervals<br>Update min/max values

    Graph->>UI: Update visualization
    Graph->>UI: Update measurements

    Note over SI,UI: Complete processing pipeline<br>with async communication<br>between isolates